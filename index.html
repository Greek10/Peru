<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Discord Bot Panel</title>
  <style>
    body { font-family: Arial; background:#111; color:#fff; }
    select, button { margin: 5px; }
    #messages { max-height: 400px; overflow-y: auto; }
  </style>
</head>
<body>

<h2>Discord Bot Dashboard</h2>

<select id="guilds"></select>
<select id="channels"></select>
<button onclick="loadMessages()">Load Messages</button>

<div id="messages"></div>

<script>
const API = "http://localhost:3000"; // change to your backend URL

async function loadGuilds() {
  const res = await fetch(`${API}/guilds`);
  const guilds = await res.json();
  const select = document.getElementById("guilds");

  select.innerHTML = "";
  guilds.forEach(g => {
    const opt = document.createElement("option");
    opt.value = g.id;
    opt.textContent = g.name;
    select.appendChild(opt);
  });

  loadChannels();
}

async function loadChannels() {
  const guildId = guilds.value;
  const res = await fetch(`${API}/channels/${guildId}`);
  const channels = await res.json();
  const select = document.getElementById("channels");

  select.innerHTML = "";
  channels.forEach(c => {
    const opt = document.createElement("option");
    opt.value = c.id;
    opt.textContent = `#${c.name}`;
    select.appendChild(opt);
  });
}

async function loadMessages() {
  const channelId = channels.value;
  const res = await fetch(`${API}/messages/${channelId}`);
  const messages = await res.json();
  const div = document.getElementById("messages");

  div.innerHTML = "";
  messages.forEach(m => {
    div.innerHTML += `<p><b>${m.author}:</b> ${m.content}</p>`;
  });
}

guilds.addEventListener("change", loadChannels);
loadGuilds();
</script>

</body>
</html>